<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Food-Hunt</title>
  <link rel="icon" type="image/png" href="/logo.png" />

  <!-- Instagram/WebView detection - runs FIRST before any external scripts -->
  <script>
    (function () {
      var ua = navigator.userAgent || navigator.vendor || window.opera || '';
      window.__isInAppBrowser = /Instagram|FBAN|FBAV|FB_IAB|FB4A|FBIOS/i.test(ua);
    })();
  </script>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {
            // Primary: Burnt Orange (appetite/action)
            primary: {
              50: '#fff7ed',
              100: '#ffedd5',
              200: '#fed7aa',
              300: '#fdba74',
              400: '#fb923c',
              500: '#f97316',
              600: '#ea580c',
              700: '#c2410c',
              800: '#9a3412',
              900: '#7c2d12',
            },
            // Secondary: Midnight Slate (dark mode depth)
            slate: {
              800: '#1e293b',
              850: '#162032',
              900: '#0f172a',
              950: '#0a101d',
            },
            // Accent colors
            accent: {
              lime: '#a3e635',
              sky: '#0ea5e9',
              success: '#22c55e',
            },
            dark: {
              800: '#1e293b',
              900: '#0f172a',
            }
          },
          fontFamily: {
            sans: ['"Plus Jakarta Sans"', 'Inter', 'system-ui', 'sans-serif'],
          },
          animation: {
            'fade-in': 'fadeIn 0.3s ease-out forwards',
            'slide-up': 'slideUp 0.4s ease-out forwards',
            'scale-in': 'scaleIn 0.2s ease-out forwards',
            'pulse-subtle': 'pulseSubtle 2s ease-in-out infinite',
            'float': 'float 3s ease-in-out infinite',
          },
          keyframes: {
            fadeIn: {
              '0%': { opacity: '0' },
              '100%': { opacity: '1' },
            },
            slideUp: {
              '0%': { opacity: '0', transform: 'translateY(20px)' },
              '100%': { opacity: '1', transform: 'translateY(0)' },
            },
            scaleIn: {
              '0%': { opacity: '0', transform: 'scale(0.95)' },
              '100%': { opacity: '1', transform: 'scale(1)' },
            },
            pulseSubtle: {
              '0%, 100%': { opacity: '1' },
              '50%': { opacity: '0.7' },
            },
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-10px)' },
            },
          },
          backdropBlur: {
            xs: '2px',
          },
          boxShadow: {
            'glow-primary': '0 0 20px rgba(249, 115, 22, 0.3)',
            'glow-accent': '0 0 20px rgba(14, 165, 233, 0.3)',
          },
        }
      }
    }
  </script>
  <link
    href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap"
    rel="stylesheet">
  <style>
    body {
      font-family: 'Plus Jakarta Sans', 'Inter', sans-serif;
    }
  </style>

  <link rel="stylesheet" href="/index.css">
</head>

<body class="bg-gray-50 text-gray-900 dark:bg-dark-900 dark:text-gray-100 transition-colors duration-200">
  <!-- Fallback UI for Instagram/Facebook in-app browsers -->
  <div id="fallback"
    style="display:none;position:fixed;inset:0;background:linear-gradient(135deg,#0f172a 0%,#1e293b 100%);color:white;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;z-index:9999;">
    <div
      style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:24px;text-align:center;">
      <img src="/logo.png" alt="Food-Hunt" style="width:80px;height:80px;margin-bottom:24px;border-radius:16px;"
        onerror="this.style.display='none'">
      <h1
        style="font-size:28px;font-weight:700;margin-bottom:12px;background:linear-gradient(90deg,#f97316,#fb923c);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;">
        Food-Hunt</h1>
      <p style="color:#94a3b8;margin-bottom:24px;max-width:280px;line-height:1.5;">
        Instagram's browser doesn't fully support this app. Please open in your phone's browser.
      </p>

      <!-- Copy Link Button -->
      <button id="copy-link-btn" onclick="copyLink()"
        style="display:inline-flex;align-items:center;gap:8px;background:linear-gradient(135deg,#f97316 0%,#ea580c 100%);color:white;padding:16px 32px;border-radius:12px;font-weight:600;border:none;cursor:pointer;box-shadow:0 4px 20px rgba(249,115,22,0.4);font-size:16px;">
        <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
        <span id="copy-btn-text">Copy Link</span>
      </button>

      <div style="margin-top:32px;padding:20px;background:rgba(255,255,255,0.05);border-radius:12px;max-width:300px;">
        <p style="color:#f97316;font-weight:600;margin-bottom:8px;font-size:14px;">ðŸ“± How to open:</p>
        <p style="color:#94a3b8;font-size:13px;line-height:1.6;margin:0;">
          1. Tap <strong style="color:white;">â‹¯</strong> or <strong style="color:white;">â‹®</strong> in the top right<br>
          2. Select "<strong style="color:white;">Open in Browser</strong>"
        </p>
      </div>
    </div>
  </div>

  <script>
    function copyLink() {
      var url = window.location.href;
      var btn = document.getElementById('copy-btn-text');

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(url).then(function () {
          btn.textContent = 'Copied! âœ“';
          setTimeout(function () { btn.textContent = 'Copy Link'; }, 2000);
        }).catch(function () {
          fallbackCopy(url, btn);
        });
      } else {
        fallbackCopy(url, btn);
      }
    }

    function fallbackCopy(text, btn) {
      var textArea = document.createElement('textarea');
      textArea.value = text;
      textArea.style.position = 'fixed';
      textArea.style.left = '-999999px';
      document.body.appendChild(textArea);
      textArea.select();
      try {
        document.execCommand('copy');
        btn.textContent = 'Copied! âœ“';
        setTimeout(function () { btn.textContent = 'Copy Link'; }, 2000);
      } catch (err) {
        btn.textContent = 'Copy failed';
      }
      document.body.removeChild(textArea);
    }
  </script>

  <div id="root"></div>

  <script>
    // Handle Instagram/Facebook in-app browser fallback
    (function () {
      var isInAppBrowser = window.__isInAppBrowser;

      // Set the "Open in Browser" link
      var link = document.getElementById('open-browser-btn');
      if (link) {
        var url = window.location.href;
        link.href = url;
        // For iOS, try to open in Safari
        if (/iPhone|iPad|iPod/i.test(navigator.userAgent)) {
          link.href = 'x-safari-' + url;
        }
      }

      // For Instagram users: show fallback quickly if app doesn't load
      if (isInAppBrowser) {
        var fallbackShown = false;
        var timeout = setTimeout(function () {
          var root = document.getElementById('root');
          if (!root || root.innerHTML.trim() === '') {
            document.getElementById('fallback').style.display = 'block';
            fallbackShown = true;
          }
        }, 1500); // Show after 1.5 seconds if nothing rendered

        window.__hideFallback = function () {
          clearTimeout(timeout);
          if (fallbackShown) {
            document.getElementById('fallback').style.display = 'none';
          }
        };
      }

      // Global error handler for Instagram
      window.onerror = function (msg) {
        if (isInAppBrowser) {
          document.getElementById('fallback').style.display = 'block';
        }
        return false;
      };
    })();
  </script>

  <script type="module" src="/index.tsx"></script>
</body>

</html>